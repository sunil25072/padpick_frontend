<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create Account</title>
  <link rel="icon" href="/Asset/Screenshot_2026-02-10_215817-removebg-preview.png" type="image/x-icon">
  <link rel="stylesheet" href="../Css/sign_in.css" />
</head>

<body>

  <div class="signup-container">
    <h1>Create Account</h1>

    <form id="signupForm">

      <div class="input-box">
        <label>Full Name</label>
        <input type="text" id="username" placeholder="Enter your full name" required />
      </div>

      <div class="input-box">
        <label>Email</label>
        <input type="email" id="email" placeholder="Enter your email" required />
      </div>

      <div class="input-box">
        <label>Password</label>
        <input type="password" id="password" placeholder="Create a password" required />
      </div>

      <div class="input-box">
        <label>Phone number</label>
        <input type="text" id="mobile_number" placeholder="Enter phone number" required />
      </div>

      <div class="input-box">
        <label>Location</label>
        <input type="text" id="location" placeholder="Enter location" required />
      </div>

      <button type="submit" class="btn" id="signupBtn">
        Sign Up
      </button>

      <p id="message" style="text-align:center; margin-top:10px;"></p>

      <p class="login-text">
        Already have an account?
        <a href="../../index.html">Login</a>
      </p>

    </form>
  </div>

<script>
/* ================= CONFIG ================= */
const API_BASE = "https://padpick-backend.vercel.app";

/* ================= ELEMENTS ================= */
const form = document.getElementById("signupForm");
const message = document.getElementById("message");
const signupBtn = document.getElementById("signupBtn");

/* ================= SIGNUP ================= */
form.addEventListener("submit", async (e) => {
  e.preventDefault();

  message.innerText = "";
  message.style.color = "red";

  // ðŸ”’ loading state
  signupBtn.disabled = true;
  signupBtn.innerText = "Creating...";
  signupBtn.style.opacity = "0.7";

  const formData = new FormData();
  formData.append("username", document.getElementById("username").value.trim());
  formData.append("email", document.getElementById("email").value.trim());
  formData.append("password", document.getElementById("password").value);
  formData.append("mobile_number", document.getElementById("mobile_number").value.trim());
  formData.append("location", document.getElementById("location").value.trim());

  try {
    const res = await fetch(`${API_BASE}/users/signup`, {
      method: "POST",
      body: formData,
      mode: "cors",
      cache: "no-store"
    });

    const data = await res.json();

    if (!res.ok) {
      message.innerText = data.detail || "Signup failed";
      resetButton();
      return;
    }

    message.style.color = "green";
    message.innerText = "Account created successfully âœ…";

    setTimeout(() => {
      window.location.href = "../../index.html";
    }, 1000);

  } catch (err) {
    console.error("Signup error:", err);
    message.innerText = "Network error. Please check internet.";
    resetButton();
  }
});

/* ================= HELPERS ================= */
function resetButton() {
  signupBtn.disabled = false;
  signupBtn.innerText = "Sign Up";
  signupBtn.style.opacity = "1";
}
</script>

</body>
</html>
