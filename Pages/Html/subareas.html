<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Velachery - PG & Homes</title>
    <link rel="icon" href="/Asset/Screenshot_2026-02-10_215817-removebg-preview.png" type="image/x-icon">
    <link rel="stylesheet" href="../Css/subareas.css">
</head>
<body>

<!-- HEADER -->
</head>
<body>

<header>
    <h1>Padpick</h1>
    <nav class="navbar">
        <ul>
            <li><a href="./home.html">Home</a></li>
            <li><a href="./Areas.html">Areas</a></li>
            <li><a href="./profile.html">Profile</a></li>
        </ul>
    </nav>
</header>

<div class="container">
    <div id="areaTitle" class="title">Loading...</div>

    <div id="pgList" class="pg-list"></div>

    <div id="msg" class="message"></div>
</div>

<footer>
    &copy; 2025 Padpick. All rights reserved.
</footer>

<script>
const params = new URLSearchParams(window.location.search);
const areaId = params.get("area_id");

const list = document.getElementById("pgList");
const msg = document.getElementById("msg");
const title = document.getElementById("areaTitle");

if (!areaId) {
  title.innerText = "Invalid Area";
  msg.innerText = "Area not found";
}


const areaNames = {
  1: "Anna Nagar",
  2: "Perungudi",
  3: "T Nagar",
  4: "Velachery"
};

title.innerText = areaNames[areaId] || "Homes";


fetch(`https://padpick-backend.vercel.app/homes/by-area/${areaId}`)
  .then(res => res.json())
  .then(data => {

    if (!Array.isArray(data) || data.length === 0) {
      msg.innerText = "No homes found in this area";
      return;
    }

    list.innerHTML = "";

    data.forEach(home => {
      list.innerHTML += `
        <div class="pg-card">
          <img src="${home.img1}" alt="${home.name}" />
          <div class="content">
            <h3>${home.name}</h3>
            <p>â‚¹ ${home.price} / month</p>
            <a href="./Pg&Areas.html?home_id=${home.id}" class="btn">
              View Details
            </a>
          </div>
        </div>
      `;
    });
  })
  .catch(err => {
    console.error(err);
    msg.innerText = "Backend not reachable";
  });
</script>


</body>
</html>