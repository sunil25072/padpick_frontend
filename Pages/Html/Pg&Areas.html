<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Home Details</title>

  <link rel="stylesheet" href="../Css/Pg&Areas.css">
</head>

<body>

<!-- ================= HEADER ================= -->
<header>
  <h1 id="homeTitle">Loading...</h1>
  <nav class="navbar">
    <ul>
      <li><a href="./home.html">Home</a></li>
      <li><a href="./Areas.html">Areas</a></li>
      <li><a href="./profile.html">Profile</a></li>
    </ul>
  </nav>
</header>

<!-- ================= MAIN CARD ================= -->
<div class="container">
  <div class="pg-card">

    <!-- MAIN IMAGE -->
    <img id="mainImg" src="" alt="PG Room">

    <!-- THUMBNAILS + DETAILS -->
    <div class="thumbnails">

      <a href="#img1"><img id="thumb1"></a>
      <a href="#img2"><img id="thumb2"></a>
      <a href="#img3"><img id="thumb3"></a>

      <p><strong>Rent:</strong> â‚¹<span id="price"></span>/month</p>
      <p><strong>Facilities:</strong> <span id="facilities"></span></p>
      <p><strong>Address:</strong> <span id="address"></span></p>
      <p><strong>Contact no:</strong> <span id="contact"></span></p>

      <a href="javascript:history.back()" class="back-btn">Go Back</a>
    </div>
  </div>
</div>

<!-- ================= LIGHTBOX ================= -->
<div class="lightbox" id="img1">
  <a href="#">&times;</a>
  <img id="lb1">
</div>

<div class="lightbox" id="img2">
  <a href="#">&times;</a>
  <img id="lb2">
</div>

<div class="lightbox" id="img3">
  <a href="#">&times;</a>
  <img id="lb3">
</div>

<footer id="copy">
  <p>&copy;2025 Padpick All rights Reserved</p>
</footer>

<!-- ================= JS ================= -->
<script>
const params = new URLSearchParams(window.location.search);
const homeId = params.get("home_id");

if (!homeId) {
  alert("Invalid Home");
  window.location.href = "../home.html";
}

fetch(`http://127.0.0.1:8000/homes/${homeId}`)
  .then(res => {
    if (!res.ok) throw new Error("Home not found");
    return res.json();
  })
  .then(data => {
    console.log("HOME DATA ðŸ‘‰", data);

    document.getElementById("homeTitle").innerText = data.name;
    document.getElementById("price").innerText = data.price;
    document.getElementById("facilities").innerText = data.description || "â€”";
    document.getElementById("address").innerText = data.address;
    document.getElementById("contact").innerText = data.contact_number;

    if (!data.images || !data.images[0]) return;

    document.getElementById("mainImg").src = data.images[0];

    const thumbIds = ["thumb1", "thumb2", "thumb3"];
    const lightboxIds = ["lb1", "lb2", "lb3"];

    for (let i = 0; i < 3; i++) {
      if (data.images[i + 1]) {
        document.getElementById(thumbIds[i]).src = data.images[i + 1];
        document.getElementById(lightboxIds[i]).src = data.images[i + 1];
      }
    }
  })
  .catch(err => {
    console.error(err);
    alert("Backend not reachable");
  });
</script>
</body>
</html>
