<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Home Details ‚Äî PadPick</title>
  <link rel="stylesheet" href="../Css/Pg&Areas.css">
  <link rel="icon" href="/Asset/Screenshot_2026-02-10_215817-removebg-preview.png" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">

</head>

<body>

<!-- HEADER -->
<header>
  <a class="logo" href="./home.html">Pad<span>Pick</span></a>
  <h1 id="homeTitle">Loading...</h1>
  <nav class="navbar">
    <ul>
      <li><a href="./home.html">Home</a></li>
      <li><a href="./Areas.html">Areas</a></li>
      <li><a href="./profile.html">Profile</a></li>
    </ul>
  </nav>
</header>

<!-- MAIN -->
<div class="container">

  <!-- breadcrumb -->
  <div class="breadcrumb">
    <a href="./Areas.html">Areas</a>
    <span>/</span>
    <a href="javascript:history.back()">Listings</a>
    <span>/</span>
    <span id="breadName">Details</span>
  </div>

  <div class="pg-card">

    <!-- MAIN IMAGE -->
    <div class="main-img-wrap">
      <img id="mainImg" src="" alt="PG Room">
    </div>

    <!-- BOTTOM PANEL -->
    <div class="thumbnails">

      <!-- Left: thumbnails + back -->
      <div class="thumb-col">
        <div class="thumb-label">More Photos</div>
        <div class="thumb-row">
          <a href="#img1"><img id="thumb1" alt="Photo 1"></a>
          <a href="#img2"><img id="thumb2" alt="Photo 2"></a>
          <a href="#img3"><img id="thumb3" alt="Photo 3"></a>
        </div>
        <a href="javascript:history.back()" class="back-btn">‚Üê Go Back</a>
      </div>

      <!-- Right: details -->
      <div class="details-col">
        <div class="detail-label">Property Details</div>

        <div class="price-row">
          <span class="price-currency">‚Çπ</span>
          <span class="price-amount" id="price">‚Äî</span>
          <span class="price-per">/ month</span>
        </div>

        <div class="info-stack">
          <div class="info-tile">
            <div class="tile-label">Facilities</div>
            <div class="tile-value" id="facilities">‚Äî</div>
          </div>
          <div class="info-tile">
            <div class="tile-label">Address</div>
            <div class="tile-value" id="address">‚Äî</div>
          </div>
        </div>

        <div class="info-tile" style="margin-bottom:20px;">
          <div class="tile-label">Contact</div>
          <div class="tile-value contact-num" id="contact">‚Äî</div>
        </div>

        <a href="#" class="contact-btn" id="callBtn">
          üìû Call Owner
        </a>
      </div>

    </div>
  </div>
</div>

<!-- LIGHTBOXES -->
<div class="lightbox" id="img1">
  <a href="#" class="close">&times;</a>
  <img id="lb1" alt="Photo 1">
</div>

<div class="lightbox" id="img2">
  <a href="#" class="close">&times;</a>
  <img id="lb2" alt="Photo 2">
</div>

<div class="lightbox" id="img3">
  <a href="#" class="close">&times;</a>
  <img id="lb3" alt="Photo 3">
</div>

<footer>
  &copy; 2025 <span>PadPick</span>. All rights reserved.
</footer>

<!-- ================= JS ‚Äî UNCHANGED ================= -->
<script>
const params = new URLSearchParams(window.location.search);
const homeId = params.get("home_id");

if (!homeId) {
  alert("Invalid Home");
  window.location.href = "../home.html";
}

fetch(`https://padpick-backend.vercel.app/homes/${homeId}`)
  .then(res => {
    if (!res.ok) throw new Error("Home not found");
    return res.json();
  })
  .then(data => {
    console.log("HOME DATA ", data);

    document.getElementById("homeTitle").innerText = data.name;
    document.getElementById("price").innerText = data.price;
    document.getElementById("facilities").innerText = data.description || "‚Äî";
    document.getElementById("address").innerText = data.address;
    document.getElementById("contact").innerText = data.contact_number;

    // extra: update breadcrumb name & call button href
    const breadName = document.getElementById("breadName");
    if (breadName) breadName.innerText = data.name;
    const callBtn = document.getElementById("callBtn");
    if (callBtn && data.contact_number) {
      callBtn.href = "tel:" + data.contact_number;
    }

    if (!data.images || !data.images[0]) return;

    document.getElementById("mainImg").src = data.images[0];

    const thumbIds = ["thumb1", "thumb2", "thumb3"];
    const lightboxIds = ["lb1", "lb2", "lb3"];

    for (let i = 0; i < 3; i++) {
      if (data.images[i + 1]) {
        document.getElementById(thumbIds[i]).src = data.images[i + 1];
        document.getElementById(lightboxIds[i]).src = data.images[i + 1];
      }
    }
  })
  .catch(err => {
    console.error(err);
    alert("Backend not reachable");
  });
</script>
</body>
</html>